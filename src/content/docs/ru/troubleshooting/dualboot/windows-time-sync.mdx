---
title: "Проблема с временем в Windows и Linux"
description: "Решение проблемы рассинхронизации времени при использовании dual-boot конфигурации"
sidebar:
  order: 2
---

import { Aside } from '@astrojs/starlight/components';

Одна из самых распространённых и раздражающих проблем при использовании Windows и Linux на одном компьютере — постоянная рассинхронизация системного времени.

<Aside type="caution" title="Почему это происходит?">
Проблема возникает из-за **разного подхода к хранению времени в BIOS/UEFI**:
- **Linux** считает, что в BIOS хранится время в формате **UTC** (Coordinated Universal Time)
- **Windows** считает, что в BIOS хранится время в **локальном часовом поясе**

Когда вы переключаетесь между системами, каждая из них корректирует время в BIOS по-своему, что приводит к постоянной рассинхронизации.
</Aside>

## Понимание проблемы

### Как работает время в Linux

Linux по умолчанию использует UTC в качестве аппаратного времени:
1. Система читает время из BIOS как UTC
2. Применяет смещение часового пояса
3. Отображает локальное время пользователю

**Пример:** Если в BIOS 12:00 UTC, а вы в часовом поясе UTC+3, Linux покажет 15:00.

### Как работает время в Windows

Windows использует локальное время напрямую:
1. Система читает время из BIOS как локальное
2. Отображает его без преобразований
3. При изменении времени записывает локальное время обратно в BIOS

**Пример:** Если в BIOS 15:00, Windows покажет 15:00 (без учёта часового пояса).

### Что происходит при переключении

1. **Загружаетесь в Linux** → Linux читает время как UTC и добавляет смещение
2. **Перезагружаетесь в Windows** → Windows читает это же время как локальное
3. **Результат:** Время в Windows сбито на величину вашего часового пояса!

## Решение проблемы

Существует два подхода к решению:
1. Настроить Linux на использование локального времени (не рекомендуется)
2. **Настроить Windows на использование UTC**

Мы будем использовать второй подход, так как он более правильный с технической точки зрения.

### Шаг 1: Определение разрядности системы

Прежде чем выполнять команду, нужно определить, какая у вас версия Windows — 32-битная или 64-битная.

**Как узнать разрядность:**
1. Нажмите **Win + Pause/Break**
2. Или: **Параметры → Система → О системе**
3. Найдите строку **"Тип системы"**

Скорее всего, у вас **64-битная** система (это стандарт для современных компьютеров).

### Шаг 2: Выполнение команды настройки реестра

1. Откройте командную строку **от имени администратора**

2. В зависимости от разрядности вашей системы, выполните соответствующую команду

#### Для 64-битных систем (наиболее распространённый вариант):

```cmd
Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_QWORD /d 1
```

#### Для 32-битных систем (редко встречается):

```cmd
Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1
```

<Aside type="tip" title="Что делает эта команда?">
Команда добавляет параметр `RealTimeIsUniversal` в реестр Windows со значением `1`, что указывает системе интерпретировать аппаратное время как UTC, а не как локальное время.
</Aside>

После выполнения команды вы должны увидеть сообщение:
```
Операция успешно завершена.
```
или
```
The operation completed successfully.
```

### Шаг 4: Отключение службы синхронизации времени

Чтобы Windows не пыталась "исправить" время обратно, необходимо отключить службу автоматической синхронизации:

```cmd
sc config w32time start= disabled
```

<Aside type="caution" title="Важно!">
Обратите внимание на пробел после `start=` — это не опечатка! Команда должна быть именно такой: `start= disabled` (с пробелом).
</Aside>

После выполнения вы увидите:
```
[SC] ChangeServiceConfig SUCCESS
```

## Результат

После выполнения всех шагов:

- Время в Windows всегда корректное
- Время в Linux всегда корректное
- Не нужно вручную корректировать часы
- Проблема решена навсегда

## Откат изменений

Если по какой-то причине вам нужно вернуть всё обратно:

### Удаление параметра реестра:

```cmd
Reg delete HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /f
```

### Включение службы синхронизации:

```cmd
sc config w32time start= auto
```

После этого перезагрузите компьютер.
